angular.module('AgaveToGo').controller('ContainersDirectoryController', function ($injector, $timeout, $rootScope, $scope, $state, $stateParams, $q, $uibModal, $http, $translate, Commons, AppsController, SystemsController, ActionsService, PermissionsService, MessageService, Quay, SystemExecutionTypeEnum) {  $scope.offset = $scope.offset || 0;  $scope.limit = $scope.limit || 25;  $scope.containers = [];  $scope._COLLECTION_NAME = $scope._COLLECTION_NAME || 'containers';  $scope._RESOURCE_NAME = $scope._RESOURCE_NAME || 'container';  $scope.limit = 10;  $scope.available = true;  $scope.publicOnly = null;  $scope.privateOnly = null;  $scope.sortType = "-name";  $scope.sortReverse = true;  $scope.containersList = [];  $scope.containersDetailsList = [];  $scope.filter = '';    $scope.refresh = function () {    $scope.containersDetailsList = [];    $scope.requesting = true;    AppsController.getAppDetails('jfonner-run-singularity-4.2.3')        .then(            function(response) {              $scope.app = response.result;            }        );    Quay.list()      .then(        function (response) {          $scope[$scope._COLLECTION_NAME] = [];          _.each(response, function (image) {            image.available = true;            image.version = '--';            image.runtimes = {              docker: {executionType: SystemExecutionTypeEnum.CLI},              singularity: {executionType: SystemExecutionTypeEnum.CLI},              native: {executionType: SystemExecutionTypeEnum.CLI},              rocket: {executionType: SystemExecutionTypeEnum.CLI}            };            // image.executionSystem = $scope.app.executionSystem;            $scope[$scope._COLLECTION_NAME].push(image);          });          $timeout(function() {            $(".knob").knob();          },100);          $scope.requesting = false;        }, function (response) {          MessageService.handle(response, $translate.instant('error_apps_search'));          $scope.requesting = false;        }      );  };  $scope.refresh();  $scope.confirmAction = function (resourceType, resource, resourceAction, resourceList, resourceIndex) {    ActionsService.confirmAction(resourceType, resource, resourceAction, resourceList, resourceIndex);  };  $scope.getNotifications = function (resourceType, resource) {    ActionsService.getNotifications(resourceType, resource);  };});